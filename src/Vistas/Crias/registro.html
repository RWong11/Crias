<html lang="es">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../Contenido/css/bootstrap.min.css">
    <link rel="stylesheet" href="../Contenido/css/font-awesome.min.css">
    <link rel="stylesheet" href="../Contenido/css/vista.css">
    <link rel="stylesheet" href="../Contenido/css/sweetalert2.min.css">
    <script src="../Contenido/js/jquery-3.4.1.slim.min.js"></script>
    <script src="../Contenido/js/popper.min.js"></script>
    <script src="../Contenido/js/bootstrap.min.js"></script>
    <script src="../Contenido/js/sweetalert2.min.js"></script>
  </head>
  <body>
  <div class = "main"><div class = "wrapper">
   <div class="col-sm-8 offset-sm-2 text-center">
       <h1 class="display-4">Crias Registro</h1><br>
           <form id="formCrias" class="form-inlin justify-content-center">
               <div class="form-group row">
                   <label for="inputPeso" class="col-sm-2 col-form-label">Peso: </label>
                   <div class="col-sm-10">
                   <input id="inputPeso" type="number" step="0.01" class="form-control" placeholder="Peso (KG)" required>
                   </div>
               </div>
               <div class="form-group row">
                   <label for="inputGrasa" class="col-sm-2 col-form-label">Grasa: </label>
                   <div class="col-sm-10">
                   <input id="inputGrasa" type="number" step="0.01" class="form-control" placeholder="Grasa" required>
                   </div>
               </div>
               <div class="form-group row">
	               	<label for="inputColor" class="col-sm-2 col-form-label">Color: </label>
	                <div class="col-sm-10">
	                 <select id="inputColor" class="form-control" required>
	                 	<option value="" selected disabled>Seleccione un Color</option>
	                 </select>
	                </div>
               </div>
               <button id="botonRegistrar" type="submit" class="btn btn-primary">Registrar</button>
           </form>
       </div>
   </div></div>
  </body>
<script>

$(document).ready(function() {
	cargarColores();
	
	 $("#formCrias").submit(function(event) {
		 event.preventDefault();
		 registrarCria();
	});
	 
	
});

function registrarCria() {
	var peso = parseFloat($("#inputPeso").val());
	var grasa = parseFloat($("#inputGrasa").val());
	var color = parseInt($("#inputColor").val());

	var resultado = window.java.registrarCria(peso, grasa, color);
	if(resultado == 1) {
		Swal.fire({
		  type: 'success',	
		  title: 'Cria registrada correctamente!',
		  animation: false,
		  timer: 4000,
		  customClass: {
		    popup: 'animated bounceInDown'
		  }
		});
		$("#formCrias")[0].reset();
	}
	else {
		Swal.fire({
		  type: 'error',	
		  title: 'Hubo un error en la base de datos!',
		  animation: false,
		  timer: 4000,
		  customClass: {
		    popup: 'animated tada'
		  }
		});
	}
}

function cargarColores() {
	var elementos = JSON.parse(window.java.cargarLista(1));
	console.log(elementos);
	elementos.forEach(function(elemento, index) {
		$("#inputColor").append(new Option(elemento.text, elemento.value));
	});
}

</script>
</html>